{% extends 'ota/base.html' %}
{% load static %}
{% block title %}
    <title>Shop</title>
{% endblock %}
{% block content %}
    <div class="container">
     <nav style="height:1rem">
         <span></span>

        </nav>
    <div class="row">

        <!--div class="col"><img src="{% static 'images/ota/1.jpg'%}" alt="oops :("></div>
        <div class="col"><img src="{% static 'images/ota/2.jpg'%}" alt="oops :("></div>
        <div-- class="col"><img src="{% static 'images/ota/3.jpg'%}" alt="oops :("></div-->
        <div class="col card search-box">
            <h3>Search</h3>
            <div class="row">
               <div class="col">
                   <form method="GET" action="{% url 'ota:search' %}" id="search-form">
                       {% csrf_token %}
                       <div class="form-row">
                          <div class="form-group col-md-4">
                          <label for="input_origin">Origin</label>
                          <input type="text" class="form-control" id="input_origin" name="ori" placeholder="Origin" value="MVD">
                        </div>
                        <div class="form-group col-md-4">
                          <label for="input_destination">Destination</label>
                          <input type="text" class="form-control" id="input_destination" name="des" placeholder="Password" value="BUE">
                        </div>
                        <div class="form-group col-md-4">
                          <label for="input_start_date">Start Date</label>
                          <input type="date" class="form-control" id="input_start_date" name="sta" placeholder="Password">
                        </div>
                          <div class="form-group col-md-4">
                          <label for="input_start_date">Start Date</label>
                          <input type="date" class="form-control" id="input_end_date" name="ret" placeholder="Password">
                        </div>
                      </div>



                      <button id="submit-btn" type="submit" class="btn btn-primary">Search</button>
                    </form>
               </div>
            </div>
            <div class="row">

            </div>
            <div class="row"></div>

        </div>
    </div>
    <div class="row sgv_divider"></div>
    <div id="results" class="row"></div>
    <div class="row sgv_divider"></div>
    <div class="row">
        <div class="card"></div>
        <div class="card"></div>
        <div class="card"></div>
    </div>
    <div class="row sgv_divider"></div>
    <div class="row" style="width:500px">
        <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
          </ol>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img class="d-block w-100" src="{% static 'images/ota/1.jpg'%}" alt="First slide">
                    <h5>Promotion 1!</h5>
                    <p>Very Barato</p>
                </div>
                <div class="carousel-item">
                  <img class="d-block w-100" src="{% static 'images/ota/3.jpg'%}" alt="Second slide">
                </div>
                <div class="carousel-item">
                  <img class="d-block w-100" src="{% static 'images/ota/2.jpg'%}" alt="Third slide">
                </div>
              </div>
              <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
              </a>
              <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
              </a>

        </div>
    </div>
    <div class="row sgv_divider"></div>
    <div class="row" style="height:250px">
        <div class="col"><h4>Promotions</h4></div>
        <div class="col"><h4>Destinations</h4></div>
        <div class="col"><h4>Us</h4></div>

    </div>

</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<!--script>

    $("#search-form").submit(function(e){
        e.preventDefault();
        alert() ;
        des ='BUE';
        ori = 'MVD' ;

    token = 'T1RLAQL4Bvkkv1JQ2rU8HInf2saIgaM1vBC7We2JvnCLhccKlragajr1AADAsX2e1mFwyY3SLG6mWfboD4Bbmfmdb7sm0aAFziwYxdfGvqk3lyoqQlDOlnJADSkDznenMKqwR1g8lmKJi8Xi54T38dK3L07X9IgpxcmqpgOPD5Rrs/+Y5UYKx0Akk/BTEEkutNoHaMgDlLMl7QUNp10+w04vV22BH2v0l95XDuTejBO+CG9dl130vkUj8zPrZFoZp7arm2l+c9KMDg70/T1ipx7IsnILZhJCxaL36RX00vTnr44WeIcrklXn2mmR' ;
    payload = '{"OTA_AirLowFareSearchRQ": { "OriginDestinationInformation": [{"DepartureDateTime": "2021-01-21T00:00:00", "DestinationLocation": {"LocationCode":"'
    payload += des
    payload += '"}, "OriginLocation": { "LocationCode":"'
    payload += ori
    payload +='"},        "RPH": "0"      },      {        "DepartureDateTime": "2021-01-22T00:00:00",        "DestinationLocation": { "LocationCode":"'
    payload += ori
    payload += '"},        "OriginLocation": {"LocationCode":"'
    payload += des
    payload += '"},        "RPH": "1"      }    ],    "POS": {      "Source": [        {          "PseudoCityCode": "F9CE",          "RequestorID": {            "CompanyName": {              "Code": "TN"            },            "ID": "1",            "Type": "1"          }        }      ]    },    "TPA_Extensions": {      "IntelliSellTransaction": {        "RequestType": {          "Name": "200ITINS"        }      }    },    "TravelPreferences": {      "TPA_Extensions": {        "DataSources": {          "ATPCO": "Enable",          "LCC": "Disable",          "NDC": "Disable"        },        "NumTrips": {}      }    },    "TravelerInfoSummary": {      "AirTravelerAvail": [        {          "PassengerTypeQuantity": [            {              "Code": "ADT",              "Quantity": 1            }          ]        }      ],      "SeatsRequested": [        1      ]    },    "Version": "1"  }}' ;

    console.log('Start') ;


            var settings = {
                "async": false,
                "crossDomain": true,
                "url": "https://api-crt.cert.havail.sabre.com/v2/offers/shop",
                "method": "POST",
                "headers": {'content-type': 'application/json', 'Authorization': 'Bearer ' + token},
                "data": payload,
            }

            $.ajax(settings).done(function (response) {
                itin_num = response.groupedItineraryResponse.statistics.itineraryCount;
                alert(itin_num);


                $.post('results', {
                    'csrfmiddlewaretoken': $("input[name='csrfmiddlewaretoken']").val(),
                    'options':'asdasd'
                 }) ;


            });
            //#this.submit();
    });
</script-->
{% endblock %}